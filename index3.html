<!doctype html>
<html lang="lv">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>RAĢ STUNDU LAIKI</title>
  <style>
    :root { --bg:#f3f4f6; --fg:#111827; --card:#ffffff; --muted:#6b7280; --accent:#3b82f6; --barbg:#e5e7eb; }
    * { box-sizing: border-box; }
    body { margin:0; font-family: system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji"; background:var(--bg); color:var(--fg); }
    .wrap { min-height:100svh; display:grid; place-items:center; padding:24px; }
    .container { width:100%; max-width:720px; display:flex; flex-direction:column; gap:16px; align-items:center; }
    h1 { font-size:28px; margin:0 0 4px 0; text-align:center; }
    .clock { font-size:20px; color:var(--fg); }
    .card { width:100%; max-width:380px; background:var(--card); border-radius:16px; padding:16px; box-shadow:0 8px 24px rgba(0,0,0,.07); text-align:center; }
    .title { font-size:18px; margin-bottom:8px; }
    .muted { color:var(--muted); font-size:14px; }
    .progress { width:100%; height:8px; border-radius:999px; background:var(--barbg); overflow:hidden; margin-top:8px; }
    .bar { height:100%; width:0%; background:var(--accent); border-radius:999px; transition:width .25s linear; }
    .next { font-size:18px; text-align:center; }
    .dash { padding:16px; background:#fde68a; border-radius:16px; width:100%; max-width:380px; text-align:center; }
    .buttons { display:flex; gap:8px; margin-bottom:12px; flex-wrap:wrap; justify-content:center; }
    button { padding:8px 12px; border:none; border-radius:8px; cursor:pointer; background:var(--barbg); font-size:14px; }
    button.active { background:var(--accent); color:#fff; }
    .footer-note {
  position: fixed;
  right: 12px;
  bottom: 8px;
  font-size: 13px;
  color: var(--muted);
  background: transparent;
  z-index: 10;
  pointer-events: none;
}
  </style>
</head>
<body>
  <div class="wrap">
    <div class="container">
      <div class="buttons">
        <button id="btn13">1.-3. klase</button>
        <button id="btn47">4.-7. klase</button>
        <button id="btn812">8.-12. klase</button>
      </div>
      <h1 id="title">STUNDU LAIKI</h1>



      <div id="dateLV" class="muted"></div>
      <div id="time" class="clock" style="font-style: italic;">Pareizs laiks: —</div>

      <div id="current" class="card" hidden>
        <div class="title">Tagad: <span id="currentLabel">—</span></div>
        <div class="muted">Atlikušas <span id="remaining">—</span></div>
        <div class="progress"><div id="progress" class="bar"></div></div>
      </div>

      <div id="noCurrent" class="dash">-</div>

      <div class="next">
        Nākamais: <span id="nextLabel">—</span> (<span id="nextStart">—</span>)
        <div class="muted">Pēc <span id="untilNext">—</span></div>
      </div>
      
    <div id="nameday" style="position:fixed;left:12px;bottom:8px;font-size:13px;color:var(--muted);background:transparent;z-index:10;pointer-events:none;">
      <span style="font-weight:bold;">Vārda dienu šodien svin:</span> <span id="namedayList">—</span>
    </div>


  <script>
    const schedules = {
      "13": [
        { type:"lesson", nr:1, start:"08:10", end:"08:50" },
        { type:"break", nr:null, start:"08:50", end:"09:00" },
        { type:"lesson", nr:2, start:"09:00", end:"09:40" },
        { type:"break", nr:null, start:"09:40", end:"09:50" },
        { type:"lesson", nr:3, start:"09:50", end:"10:30" },
        { type:"dynamic", nr:null, start:"10:30", end:"11:00" },
        { type:"lunch", nr:null, start:"11:00", end:"11:30" },
        { type:"lesson", nr:4, start:"11:30", end:"12:10" },
        { type:"break", nr:null, start:"12:10", end:"12:20" },
        { type:"lesson", nr:5, start:"12:20", end:"13:00" },
        { type:"break", nr:null, start:"13:00", end:"13:10" },
        { type:"lesson", nr:6, start:"13:10", end:"13:50" },
        { type:"snack", nr:null, start:"14:10", end:"14:30" }
      ],
      "47": [
        { type:"lesson", nr:1, start:"08:10", end:"08:50" },
        { type:"break", nr:null, start:"08:50", end:"09:00" },
        { type:"lesson", nr:2, start:"09:00", end:"09:40" },
        { type:"break", nr:null, start:"09:40", end:"09:50" },
        { type:"lesson", nr:3, start:"09:50", end:"10:30" },
        { type:"break", nr:null, start:"10:30", end:"10:40" },
        { type:"lesson", nr:4, start:"10:40", end:"11:20" },
        { type:"break", nr:null, start:"11:20", end:"11:30" },
        { type:"lesson", nr:5, start:"11:30", end:"12:10" },
        { type:"lunch", nr:null, start:"12:10", end:"12:40" },
        { type:"lesson", nr:6, start:"12:40", end:"13:20" },
        { type:"break", nr:null, start:"13:20", end:"13:30" },
        { type:"lesson", nr:7, start:"13:30", end:"14:10" },
        { type:"break", nr:null, start:"14:10", end:"14:20" },
        { type:"lesson", nr:8, start:"14:20", end:"15:00" },
      ],
      "812": [
        { type:"lesson", nr:1, start:"08:10", end:"08:50" },
        { type:"break", nr:null, start:"08:50", end:"09:00" },
        { type:"lesson", nr:2, start:"09:00", end:"09:40" },
        { type:"break", nr:null, start:"09:40", end:"09:50" },
        { type:"lesson", nr:3, start:"09:50", end:"10:30" },
        { type:"break", nr:null, start:"10:30", end:"10:40" },
        { type:"lesson", nr:4, start:"10:40", end:"11:20" },
        { type:"break", nr:null, start:"11:20", end:"11:30" },
        { type:"lesson", nr:5, start:"11:30", end:"12:10" },
        { type:"break", nr:null, start:"12:10", end:"12:20" },
        { type:"lesson", nr:6, start:"12:20", end:"13:00" },
        { type:"lunch", nr:null, start:"13:00", end:"13:30" },
        { type:"lesson", nr:7, start:"13:30", end:"14:10" },
        { type:"break", nr:null, start:"14:10", end:"14:20" },
        { type:"lesson", nr:8, start:"14:20", end:"15:00" },
        { type:"break", nr:null, start:"15:00", end:"15:10" },
        { type:"lesson", nr:9, start:"15:10", end:"15:50" }
      ]
    };

    let currentKey = localStorage.getItem("scheduleKey") || "812";

    function parseTime(str, addDay = 0) {
      const [h, m] = str.split(":").map(Number);
      const d = new Date();
      d.setDate(d.getDate() + addDay);
      d.setHours(h, m, 0, 0);
      return d;
    }

    function labelFor(item) {
      if (!item) return "—";
      if (item.type === "lesson") return `${item.nr}. stunda`;
      if (item.type === "lunch") return "Pusdienas";
      if (item.type === "dynamic") return "Dinamiskā pauze";
      if (item.type === "snack") return "Launags";
      return "Pārtraukums";
    }

    function getCurrentPeriod(now = new Date(), schedule) {
      for (let i = 0; i < schedule.length; i++) {
        const s = parseTime(schedule[i].start);
        const e = parseTime(schedule[i].end);
        if (now >= s && now < e) {
          const next = schedule[i + 1] || null;
          return { current:schedule[i], next, startTime:s, endTime:e, nextStart: next ? parseTime(next.start) : parseTime(schedule[0].start,1)};
        }
      }
      const firstStart = parseTime(schedule[0].start);
      if (now < firstStart) return { current:null, next:schedule[0], startTime:null, endTime:null, nextStart:firstStart };
      return { current:null, next:schedule[0], startTime:null, endTime:null, nextStart:parseTime(schedule[0].start,1) };
    }

    function formatDuration(sec){
      sec=Math.max(0,Math.floor(sec));
      const h=Math.floor(sec/3600);const m=Math.floor((sec%3600)/60);const s=sec%60;
      if(h>0)return `${h} h ${m} min ${s} sek`;
      return `${m} min ${s} sek`;
    }

    const elTime=document.getElementById('time');
    const elCurrent=document.getElementById('current');
    const elNoCurrent=document.getElementById('noCurrent');
    const elCurrentLabel=document.getElementById('currentLabel');
    const elRemaining=document.getElementById('remaining');
    const elProgress=document.getElementById('progress');
    const elNextLabel=document.getElementById('nextLabel');
    const elNextStart=document.getElementById('nextStart');
    const elUntilNext=document.getElementById('untilNext');
    const elTitle=document.getElementById('title');

    function formatLatvianDate(d) {
  const days = ["Pirmdiena", "Otrdiena", "Trešdiena", "Ceturtdiena", "Piektdiena", "Sestdiena", "Svētdiena"];
  const months = ["janvāris", "februāris", "marts", "aprīlis", "maijs", "jūnijs", "jūlijs", "augusts", "septembris", "oktobris", "novembris", "decembris"];
  const dayName = days[d.getDay() === 0 ? 6 : d.getDay() - 1];
  return `${dayName}, ${d.getFullYear()}.gada ${d.getDate()}.${months[d.getMonth()]}`;
}

    function updateUI(){
      const now=new Date();
     document.getElementById('dateLV').textContent = formatLatvianDate(now);
      elTime.textContent=`Laiks: ${now.toLocaleTimeString('lv-LV')}`;
      const schedule=schedules[currentKey];
      const p=getCurrentPeriod(now,schedule);

      if(p.current){
        elCurrent.hidden=false;elNoCurrent.hidden=true;
        elCurrentLabel.textContent=labelFor(p.current);
        elRemaining.textContent=formatDuration((p.endTime-now)/1000);
        const progress=((now-p.startTime)/(p.endTime-p.startTime))*100;
        elProgress.style.width=Math.max(0,Math.min(100,progress))+"%";
      } else {
        elCurrent.hidden=false;elNoCurrent.hidden=false;
        elCurrentLabel.textContent='—';elRemaining.textContent='—';
        elProgress.style.width='0%';
      }
      elNextLabel.textContent=labelFor(p.next);
      elNextStart.textContent=p.next? p.next.start:'—';
      elUntilNext.textContent=formatDuration((p.nextStart-now)/1000);

      elTitle.textContent = currentKey=="13"?"RAĢ STUNDU LAIKI 1.-3. KLASEI":currentKey=="47"?"RAĢ STUNDU LAIKI 4.-7. KLASEI":"RAĢ STUNDU LAIKI 8.-12. KLASEI";

      document.getElementById('btn13').classList.toggle('active',currentKey==="13");
      document.getElementById('btn47').classList.toggle('active',currentKey==="47");
      document.getElementById('btn812').classList.toggle('active',currentKey==="812");
    }

    function setSchedule(key){
      currentKey=key;localStorage.setItem("scheduleKey",key);
      updateUI();
    }

    document.getElementById('btn13').onclick=()=>setSchedule("13");
    document.getElementById('btn47').onclick=()=>setSchedule("47");
    document.getElementById('btn812').onclick=()=>setSchedule("812");

    updateUI();
    setInterval(updateUI,1000);
  </script>
    <script src="vardadienas.js"></script>
    <div class="footer-note">
      Lapas izstrādātājs neatbild par informācijas pareizību un aktualitāti. <br>
      Lapas pēdējās izmaiņas veiktas: 09.09.25 
      
     </div>

</body>
</html>
